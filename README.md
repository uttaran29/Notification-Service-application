# Notification Service (Spring Boot)

This is a Spring Boot-based **Notification Service** that supports:

* **User Registration and Login**
* Sending notifications via **Email**, **SMS**, and **In-App**
* **Asynchronous delivery** using **RabbitMQ**
* **Retry logic** for failed notifications
* REST APIs to access and manage notifications

---

## Features

### User Management

* `POST /api/users/register`: Register with email, mobile, password
* `POST /api/users/login`: Login using email and password

### Notifications

* **Types supported**:

  * `EMAIL` (via JavaMailSender)
  * `SMS` (via Twilio)
  * `IN_APP` (stored in database)

* **Endpoints**:

  * `POST /api/notifications`: Send notification
  * `GET /api/users/{id}/notifications`: View all notifications for a user

### RabbitMQ Integration

* Publishes notification requests to a queue
* Listens and processes them asynchronously

### Retry Support

* Failed notifications (email/SMS) retry up to 3 times
* Exponential backoff between retries

### In-App Notifications

* Stored in the database
* Fetched using API endpoint
* Extendable to support real-time UI updates and read/unread status

---

## Technologies Used

* Java 17
* Spring Boot
* Spring Data JPA
* Spring Security (basic config)
* JavaMailSender
* Twilio
* RabbitMQ
* PostgreSQL (configurable)

---

##  Setup Instructions

### 1. Clone the Repository

```bash
https://github.com/uttaran29/Notification-Service-application
cd notification-service
```

### 2. Configure `application.properties`

```properties
spring.application.name=notification

#Database
spring.datasource.url=database-url
spring.datasource.username=database-username
spring.datasource.password=database-password
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Email
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=Senders email
spring.mail.password=Sixteen digit password generated by Email service provider
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# Twilio
twilio.account-sid=TWILIO_SID
twilio.auth-token=TWILIO_AUTH_TOKEN
twilio.phone-number=TWILIO_VERIFIED_PHONE_NO

#RabbitMQ
spring.rabbitmq.host=localhost
spring.rabbitmq.port=5672
spring.rabbitmq.username=guest
spring.rabbitmq.password=guest
spring.rabbitmq.template.retry.enabled=true
spring.rabbitmq.template.retry.max-attempts=3
spring.rabbitmq.template.retry.initial-interval=1000
spring.rabbitmq.template.retry.multiplier=2.0
spring.rabbitmq.template.retry.max-interval=10000

```

### 3. Start RabbitMQ (Locally or via Docker)

```bash
docker run -d --hostname rabbitmq --name rabbitmq -p 5672:5672 -p 15672:15672 rabbitmq:3-management
```

Login to the dashboard: [http://localhost:15672](http://localhost:15672) (user: guest, pass: guest)

### 4. Build and Run the App

```bash
./mvnw clean install
./mvnw spring-boot:run
```

Application will start at: `http://localhost:8080`

---

## Sample API Requests

### Register User

```http
POST /api/users/register
{
  "email": "test@example.com",
  "mobile": "+911234567890",
  "password": "123456"
}
```

### Send Notification

```http
POST /api/notifications
{
  "id": "1",
  "type": "EMAIL",
  "message": "This is a sample notification."
}
```
In type we can choose between "EMAIL" and "SMS"

### Get Notifications

```http
GET /api/users/1/notifications
```
---

## Author

**Uttaran Sarkar**
[LinkedIn](https://linkedin.com/in/uttaran-sarkar) | [GitHub](https://github.com/uttaran29)
